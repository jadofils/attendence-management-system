<!-- Insert Course Modal -->
<div id="addCourseModal" class="modal" th:fragment="insert_form" style="display: none;">
    <div class="modal-content">
        <!-- Close Button -->
        <span class="close-button" onclick="closeModal()">&times;</span>
        <h2>Add New Course</h2>

        <!-- Success or Error Messages -->
        <div th:if="${success}" style="color: green;">
            <p th:text="${success}"></p>
        </div>
        <div th:if="${error}" style="color: red;">
            <p th:text="${error}"></p>
        </div>

        <!-- Course Form -->
        <form id="addCourseForm">
            <!-- Program Dropdown -->
            <label for="programId">Select Program:</label>
            <select id="programId" required>
                <option value="">Select a Program</option>
                <option th:each="program : ${programs}" th:value="${program.programId}" th:text="${program.programName}"></option>
            </select>

            <!-- Course Name -->
            <label for="courseName">Course Name:</label>
            <input type="text" id="courseName" required>

            <!-- Course Description -->
            <label for="courseDescription">Description:</label>
            <textarea id="courseDescription" required></textarea>

            <!-- Credits -->
            <label for="credits">Credits:</label>
            <input type="number" id="credits" required>

            <!-- Submit Button -->
            <button type="button" onclick="submitCourseForm()" style="background-color: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                Add Course
            </button>
        </form>
    </div>
</div>
<script>
    function submitCourseForm() {
    const programId = document.getElementById('programId').value;

    // Alert if no program is selected
    if (!programId) {
        alert("Please select a program.");
        return;
    }

    // Collect form data
    const courseData = {
        courseName: document.getElementById('courseName').value,
        courseDescription: document.getElementById('courseDescription').value,
        credits: parseInt(document.getElementById('credits').value)
    };

    // Send POST request
    fetch(`/api/courses/${programId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(courseData)
    })
    .then(response => response.json()) // Parse JSON response
    .then(data => {
        if (data.status === "success") {
            alert(data.message); // Success alert
            closeModal(); // Close modal
            location.reload(); // Refresh the page
        } else if (data.status === "error") {
            alert(data.message); // Error alert for duplicate course
        }
    })
    .catch(error => {
        alert("Failed to add course. Error: " + error.message); // General error
    });
}
</script>
<script>



</script>